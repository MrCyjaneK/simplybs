{
    "package": "libiconv",
    "version": "1.17",
    "type": "host",
    "download": {
        "kind": "tar.gz",
        "sha256": "8f74213b56238c85a50a5329f77e06198771e70dd9a739779f4c02f65d971313",
        "url": "http://ftpmirror.gnu.org/gnu/libiconv/libiconv-1.17.tar.gz"
    },
    "dependencies": [
        "*-android*:native/android_ndk",
        "all:native/config",
        "all:native/make"
    ],
    "build": {
        "env": [
            "all:CFLAGS=$CFLAGS -fPIC",
            "all:BUILD_HOST=$HOST",
            "aarch64-apple-ios-simulator:BUILD_HOST=aarch64-apple-ios",
            "all:config_opts=--host=$BUILD_HOST --prefix=$PREFIX --disable-nls --enable-static --disable-shared",
            "all:config_opts=$config_opts",
            "*linux:config_opts=$config_opts --with-pic"
        ],
        "steps": [
            "all:cp -f $PREFIX/native/usr/share/config/config.guess build-aux/",
            "all:cp -f $PREFIX/native/usr/share/config/config.sub build-aux/",
            "all:./configure $config_opts",
            "all:make -j$NUM_CORES",
            "all:make DESTDIR=$STAGING_DIR install"
        ]
    }
}
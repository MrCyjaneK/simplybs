{
    "package": "libusb",
    "version": "1.0.26",
    "type": "host",
    "download": {
        "kind": "tar.bz2",
        "sha256": "12ce7a61fc9854d1d2a1ffe095f7b5fac19ddba095c259e6067a46500381b5a5",
        "url": "https://github.com/libusb/libusb/releases/download/v1.0.26/libusb-1.0.26.tar.bz2"
    },
    "dependencies": [
        "*-android*:native_android_ndk",
        "all:native_config"
    ],
    "build": {
        "env": [
            "all:config_opts=--host=$HOST --prefix=$PREFIX --disable-shared",
            "*-linux-gnu:config_opts=$config_opts --with-pic --disable-udev",
            "*-w64-mingw32:config_opts=$config_opts --disable-udev",
            "*-apple-darwin:config_opts=$config_opts --disable-udev",
            "all:config_opts=$config_opts AR_FLAGS=$ARFLAGS",
            "all:SHOULD_BUILD=echo",
            "*-linux-gnu:SHOULD_BUILD=",
            "*-w64-mingw32:SHOULD_BUILD=",
            "*-apple-darwin:SHOULD_BUILD="
        ],
        "steps": [
            "all:cp -f $PREFIX/native/usr/share/config/config.guess config.guess",
            "all:cp -f $PREFIX/native/usr/share/config/config.sub config.sub",
            "all:$SHOULD_BUILD autoreconf -i",
            "all:$SHOULD_BUILD ./configure $config_opts",
            "all:$SHOULD_BUILD make -j$NUM_CORES",
            "all:$SHOULD_BUILD make -j$NUM_CORES DESTDIR=$STAGING_DIR install",
            "all:$SHOULD_BUILD cp -f $STAGING_DIR$PREFIX/lib/libusb-1.0.a $STAGING_DIR$PREFIX/lib/libusb.a"
        ]
    }
}